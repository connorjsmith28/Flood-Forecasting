version: 2

sources:
  - name: raw
    description: Raw data extracted from hydrology APIs via Dagster
    schema: raw
    tables:
      - name: sites_missouri_basin
        description: USGS monitoring sites in the Missouri River Basin (HUC 10)
        columns:
          - name: site_id
            description: USGS site identifier
          - name: station_name
            description: Station name
          - name: latitude
            description: Decimal latitude
          - name: longitude
            description: Decimal longitude
          - name: huc_code
            description: Hydrologic Unit Code
          - name: altitude
            description: Site altitude in feet

      - name: site_metadata
        description: Detailed USGS site metadata including drainage area
        columns:
          - name: site_id
            description: USGS site identifier
          - name: station_name
            description: Station name
          - name: latitude
            description: Decimal latitude
          - name: longitude
            description: Decimal longitude
          - name: drainage_area_sq_mi
            description: Drainage area in square miles
          - name: huc_code
            description: Hydrologic Unit Code

      - name: gages_basin_attributes
        description: GAGES-II/CAMELS watershed characteristics
        columns:
          - name: gauge_id
            description: Gauge identifier (may vary by source)

      - name: nldi_basin_attributes
        description: NLDI basin characteristics for USGS sites (126+ attributes)
        columns:
          - name: site_id
            description: USGS site identifier

      - name: streamflow_raw
        description: USGS instantaneous streamflow observations (15-minute intervals)
        columns:
          - name: site_id
            description: USGS site identifier
          - name: datetime
            description: Observation timestamp
          - name: streamflow_cfs
            description: Discharge in cubic feet per second
          - name: qualifiers
            description: Data quality flags
          - name: extracted_at
            description: When the data was extracted

      - name: weather_forcing
        description: Hourly meteorological forcing data from Open-Meteo
        columns:
          - name: longitude
            description: Longitude of location
          - name: latitude
            description: Latitude of location
          - name: datetime
            description: Observation timestamp (UTC)
          - name: prcp
            description: Precipitation (mm)
          - name: temp
            description: 2-m temperature (°C)
          - name: humidity
            description: Relative humidity (%)
          - name: wind_speed
            description: 10-m wind speed (m/s)
          - name: wind_direction
            description: Wind direction (degrees)
          - name: rsds
            description: Shortwave radiation (W/m²)
          - name: rlds
            description: Longwave radiation (W/m²)
          - name: psurf
            description: Surface pressure (hPa)
          - name: pet
            description: Evapotranspiration (mm)
          - name: extracted_at
            description: When the data was extracted
